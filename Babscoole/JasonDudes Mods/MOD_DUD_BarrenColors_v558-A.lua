DataTable =
{
    {
        ["PALETTE"] = "Leaf",
        ["NUMCOLOURS"] = "All",
        ["COLOURS"] =
        {
            {["R"]="0.462000",["G"]="0.557000",["B"]="0.163000",["A"]="1.000000"},
            {["R"]="0.462000",["G"]="0.557000",["B"]="0.163000",["A"]="1.000000"},
            {["R"]="0.223000",["G"]="0.453000",["B"]="0.104000",["A"]="1.000000"},
            {["R"]="0.223000",["G"]="0.453000",["B"]="0.104000",["A"]="1.000000"},
            {["R"]="0.777000",["G"]="0.736000",["B"]="0.107000",["A"]="1.000000"},
            {["R"]="0.777000",["G"]="0.736000",["B"]="0.107000",["A"]="1.000000"},
            {["R"]="0.696000",["G"]="0.516000",["B"]="0.135000",["A"]="1.000000"},
            {["R"]="0.696000",["G"]="0.516000",["B"]="0.135000",["A"]="1.000000"},
            {["R"]="0.557000",["G"]="0.542000",["B"]="0.184000",["A"]="1.000000"},
            {["R"]="0.557000",["G"]="0.542000",["B"]="0.184000",["A"]="1.000000"},
            {["R"]="0.483000",["G"]="0.472000",["B"]="0.206000",["A"]="1.000000"},
            {["R"]="0.483000",["G"]="0.472000",["B"]="0.206000",["A"]="1.000000"},
            {["R"]="0.627000",["G"]="0.245000",["B"]="0.150000",["A"]="1.000000"},
            {["R"]="0.627000",["G"]="0.245000",["B"]="0.150000",["A"]="1.000000"},
            {["R"]="0.543000",["G"]="0.251000",["B"]="0.178000",["A"]="1.000000"},
            {["R"]="0.543000",["G"]="0.251000",["B"]="0.178000",["A"]="1.000000"},
            {["R"]="0.301000",["G"]="0.557000",["B"]="0.157000",["A"]="1.000000"},
            {["R"]="0.301000",["G"]="0.557000",["B"]="0.157000",["A"]="1.000000"},
            {["R"]="0.277000",["G"]="0.500000",["B"]="0.150000",["A"]="1.000000"},
            {["R"]="0.277000",["G"]="0.500000",["B"]="0.150000",["A"]="1.000000"},
            {["R"]="0.696000",["G"]="0.381000",["B"]="0.076000",["A"]="1.000000"},
            {["R"]="0.696000",["G"]="0.381000",["B"]="0.076000",["A"]="1.000000"},
            {["R"]="0.696000",["G"]="0.264000",["B"]="0.078000",["A"]="1.000000"},
            {["R"]="0.696000",["G"]="0.264000",["B"]="0.078000",["A"]="1.000000"},
            {["R"]="0.647000",["G"]="0.632000",["B"]="0.276000",["A"]="1.000000"},
            {["R"]="0.647000",["G"]="0.632000",["B"]="0.276000",["A"]="1.000000"},
            {["R"]="0.623000",["G"]="0.606000",["B"]="0.195000",["A"]="1.000000"},
            {["R"]="0.623000",["G"]="0.606000",["B"]="0.195000",["A"]="1.000000"},
            {["R"]="0.607000",["G"]="0.464000",["B"]="0.186000",["A"]="1.000000"},
            {["R"]="0.607000",["G"]="0.464000",["B"]="0.186000",["A"]="1.000000"},
            {["R"]="0.613000",["G"]="0.364000",["B"]="0.151000",["A"]="1.000000"},
            {["R"]="0.613000",["G"]="0.364000",["B"]="0.151000",["A"]="1.000000"},
            {["R"]="0.611000",["G"]="0.168000",["B"]="0.128000",["A"]="1.000000"},
            {["R"]="0.611000",["G"]="0.168000",["B"]="0.128000",["A"]="1.000000"},
            {["R"]="0.391000",["G"]="0.322000",["B"]="0.537000",["A"]="1.000000"},
            {["R"]="0.391000",["G"]="0.322000",["B"]="0.537000",["A"]="1.000000"},
            {["R"]="0.278000",["G"]="0.581000",["B"]="0.653000",["A"]="1.000000"},
            {["R"]="0.278000",["G"]="0.581000",["B"]="0.653000",["A"]="1.000000"},
            {["R"]="0.203000",["G"]="0.457000",["B"]="0.613000",["A"]="1.000000"},
            {["R"]="0.203000",["G"]="0.457000",["B"]="0.613000",["A"]="1.000000"},
            {["R"]="0.470000",["G"]="0.407000",["B"]="0.247000",["A"]="1.000000"},
            {["R"]="0.470000",["G"]="0.407000",["B"]="0.247000",["A"]="1.000000"},
            {["R"]="0.443000",["G"]="0.557000",["B"]="0.223000",["A"]="1.000000"},
            {["R"]="0.443000",["G"]="0.557000",["B"]="0.223000",["A"]="1.000000"},
            {["R"]="0.248000",["G"]="0.484000",["B"]="0.550000",["A"]="1.000000"},
            {["R"]="0.248000",["G"]="0.484000",["B"]="0.550000",["A"]="1.000000"},
            {["R"]="0.203000",["G"]="0.407000",["B"]="0.407000",["A"]="1.000000"},
            {["R"]="0.203000",["G"]="0.407000",["B"]="0.407000",["A"]="1.000000"},
            {["R"]="0.713000",["G"]="0.272000",["B"]="0.083000",["A"]="1.000000"},
            {["R"]="0.713000",["G"]="0.272000",["B"]="0.083000",["A"]="1.000000"},
            {["R"]="0.467000",["G"]="0.129000",["B"]="0.099000",["A"]="1.000000"},
            {["R"]="0.467000",["G"]="0.129000",["B"]="0.099000",["A"]="1.000000"},
            {["R"]="0.149000",["G"]="0.563000",["B"]="0.315000",["A"]="1.000000"},
            {["R"]="0.149000",["G"]="0.563000",["B"]="0.315000",["A"]="1.000000"},
            {["R"]="0.244000",["G"]="0.517000",["B"]="0.184000",["A"]="1.000000"},
            {["R"]="0.244000",["G"]="0.517000",["B"]="0.184000",["A"]="1.000000"},
            {["R"]="0.329000",["G"]="0.487000",["B"]="0.231000",["A"]="1.000000"},
            {["R"]="0.329000",["G"]="0.487000",["B"]="0.231000",["A"]="1.000000"},
            {["R"]="0.236000",["G"]="0.543000",["B"]="0.186000",["A"]="1.000000"},
            {["R"]="0.236000",["G"]="0.543000",["B"]="0.186000",["A"]="1.000000"},
            {["R"]="0.188000",["G"]="0.480000",["B"]="0.480000",["A"]="1.000000"},
            {["R"]="0.188000",["G"]="0.480000",["B"]="0.480000",["A"]="1.000000"},
            {["R"]="0.434000",["G"]="0.378000",["B"]="0.437000",["A"]="1.000000"},
            {["R"]="0.434000",["G"]="0.378000",["B"]="0.437000",["A"]="1.000000"},
        }
    },
    {
        ["PALETTE"] = "Wood",
        ["NUMCOLOURS"] = "_16",
        ["COLOURS"] =
        {
            {["R"]="0.850000",["G"]="0.606050",["B"]="0.428740",["A"]="1.000000"},
            {["R"]="0.850000",["G"]="0.606050",["B"]="0.428740",["A"]="1.000000"},
            {["R"]="0.904400",["G"]="0.871080",["B"]="0.718760",["A"]="1.000000"},
            {["R"]="0.904400",["G"]="0.871080",["B"]="0.718760",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.975928",["B"]="0.951857",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.975928",["B"]="0.951857",["A"]="1.000000"},
            {["R"]="0.719100",["G"]="0.678640",["B"]="0.639370",["A"]="1.000000"},
            {["R"]="0.719100",["G"]="0.678640",["B"]="0.639370",["A"]="1.000000"},
            {["R"]="0.850000",["G"]="0.606050",["B"]="0.428740",["A"]="1.000000"},
            {["R"]="0.850000",["G"]="0.606050",["B"]="0.428740",["A"]="1.000000"},
            {["R"]="0.904400",["G"]="0.871080",["B"]="0.718760",["A"]="1.000000"},
            {["R"]="0.904400",["G"]="0.871080",["B"]="0.718760",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.975928",["B"]="0.951857",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.975928",["B"]="0.951857",["A"]="1.000000"},
            {["R"]="0.719100",["G"]="0.678640",["B"]="0.639370",["A"]="1.000000"},
            {["R"]="0.719100",["G"]="0.678640",["B"]="0.639370",["A"]="1.000000"},
            {["R"]="0.499800",["G"]="0.451010",["B"]="0.391510",["A"]="1.000000"},
            {["R"]="0.499800",["G"]="0.451010",["B"]="0.391510",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.956539",["B"]="0.760502",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.956539",["B"]="0.760502",["A"]="1.000000"},
            {["R"]="0.940100",["G"]="0.935340",["B"]="0.910350",["A"]="1.000000"},
            {["R"]="0.940100",["G"]="0.935340",["B"]="0.910350",["A"]="1.000000"},
            {["R"]="0.340000",["G"]="0.338810",["B"]="0.334050",["A"]="1.000000"},
            {["R"]="0.340000",["G"]="0.338810",["B"]="0.334050",["A"]="1.000000"},
            {["R"]="0.499800",["G"]="0.451010",["B"]="0.391510",["A"]="1.000000"},
            {["R"]="0.499800",["G"]="0.451010",["B"]="0.391510",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.956539",["B"]="0.760502",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.956539",["B"]="0.760502",["A"]="1.000000"},
            {["R"]="0.940100",["G"]="0.935340",["B"]="0.910350",["A"]="1.000000"},
            {["R"]="0.940100",["G"]="0.935340",["B"]="0.910350",["A"]="1.000000"},
            {["R"]="0.340000",["G"]="0.338810",["B"]="0.334050",["A"]="1.000000"},
            {["R"]="0.340000",["G"]="0.338810",["B"]="0.334050",["A"]="1.000000"},
            {["R"]="0.401030",["G"]="0.476000",["B"]="0.341530",["A"]="1.000000"},
            {["R"]="0.401030",["G"]="0.476000",["B"]="0.341530",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.665313",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.665313",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.786719",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.786719",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="0.691900",["G"]="0.593130",["B"]="0.456280",["A"]="1.000000"},
            {["R"]="0.691900",["G"]="0.593130",["B"]="0.456280",["A"]="1.000000"},
            {["R"]="0.401030",["G"]="0.476000",["B"]="0.341530",["A"]="1.000000"},
            {["R"]="0.401030",["G"]="0.476000",["B"]="0.341530",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.665313",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.665313",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.786719",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.786719",["B"]="0.492500",["A"]="1.000000"},
            {["R"]="0.691900",["G"]="0.593130",["B"]="0.456280",["A"]="1.000000"},
            {["R"]="0.691900",["G"]="0.593130",["B"]="0.456280",["A"]="1.000000"},
            {["R"]="0.918000",["G"]="0.655010",["B"]="0.655010",["A"]="1.000000"},
            {["R"]="0.918000",["G"]="0.655010",["B"]="0.655010",["A"]="1.000000"},
            {["R"]="0.770440",["G"]="0.906100",["B"]="0.903720",["A"]="1.000000"},
            {["R"]="0.770440",["G"]="0.906100",["B"]="0.903720",["A"]="1.000000"},
            {["R"]="0.815660",["G"]="0.776390",["B"]="0.906100",["A"]="1.000000"},
            {["R"]="0.815660",["G"]="0.776390",["B"]="0.906100",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.970711",["B"]="0.524547",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.970711",["B"]="0.524547",["A"]="1.000000"},
            {["R"]="0.918000",["G"]="0.655010",["B"]="0.655010",["A"]="1.000000"},
            {["R"]="0.918000",["G"]="0.655010",["B"]="0.655010",["A"]="1.000000"},
            {["R"]="0.770440",["G"]="0.906100",["B"]="0.903720",["A"]="1.000000"},
            {["R"]="0.770440",["G"]="0.906100",["B"]="0.903720",["A"]="1.000000"},
            {["R"]="0.815660",["G"]="0.776390",["B"]="0.906100",["A"]="1.000000"},
            {["R"]="0.815660",["G"]="0.776390",["B"]="0.906100",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.970711",["B"]="0.524547",["A"]="1.000000"},
            {["R"]="1.000000",["G"]="0.970711",["B"]="0.524547",["A"]="1.000000"},
        }
    },
    {
        ["PALETTE"] = "RockLight",
        ["NUMCOLOURS"] = "All",
        ["COLOURS"] =
        {
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.533000",["G"]="0.533000",["B"]="0.485000",["A"]="1.000000"},
            {["R"]="0.325000",["G"]="0.255000",["B"]="0.200000",["A"]="1.000000"},
            {["R"]="0.380000",["G"]="0.315000",["B"]="0.273000",["A"]="1.000000"},
            {["R"]="0.317000",["G"]="0.260000",["B"]="0.258000",["A"]="1.000000"},
            {["R"]="0.303000",["G"]="0.324000",["B"]="0.327000",["A"]="1.000000"},
            {["R"]="0.423000",["G"]="0.365000",["B"]="0.322000",["A"]="1.000000"},
            {["R"]="0.347000",["G"]="0.310000",["B"]="0.304000",["A"]="1.000000"},
            {["R"]="0.384000",["G"]="0.290000",["B"]="0.267000",["A"]="1.000000"},
            {["R"]="0.350000",["G"]="0.250000",["B"]="0.149000",["A"]="1.000000"},
            {["R"]="0.325000",["G"]="0.255000",["B"]="0.200000",["A"]="1.000000"},
            {["R"]="0.380000",["G"]="0.315000",["B"]="0.273000",["A"]="1.000000"},
            {["R"]="0.317000",["G"]="0.260000",["B"]="0.258000",["A"]="1.000000"},
            {["R"]="0.303000",["G"]="0.324000",["B"]="0.327000",["A"]="1.000000"},
            {["R"]="0.423000",["G"]="0.365000",["B"]="0.322000",["A"]="1.000000"},
            {["R"]="0.347000",["G"]="0.310000",["B"]="0.304000",["A"]="1.000000"},
            {["R"]="0.383000",["G"]="0.288000",["B"]="0.267000",["A"]="1.000000"},
            {["R"]="0.350000",["G"]="0.250000",["B"]="0.149000",["A"]="1.000000"},
            {["R"]="0.325000",["G"]="0.255000",["B"]="0.200000",["A"]="1.000000"},
            {["R"]="0.380000",["G"]="0.315000",["B"]="0.273000",["A"]="1.000000"},
            {["R"]="0.317000",["G"]="0.260000",["B"]="0.258000",["A"]="1.000000"},
            {["R"]="0.303000",["G"]="0.324000",["B"]="0.327000",["A"]="1.000000"},
            {["R"]="0.423000",["G"]="0.365000",["B"]="0.322000",["A"]="1.000000"},
            {["R"]="0.347000",["G"]="0.310000",["B"]="0.304000",["A"]="1.000000"},
            {["R"]="0.383000",["G"]="0.288000",["B"]="0.267000",["A"]="1.000000"},
            {["R"]="0.350000",["G"]="0.250000",["B"]="0.149000",["A"]="1.000000"},
            {["R"]="0.325000",["G"]="0.255000",["B"]="0.200000",["A"]="1.000000"},
            {["R"]="0.380000",["G"]="0.315000",["B"]="0.273000",["A"]="1.000000"},
            {["R"]="0.317000",["G"]="0.260000",["B"]="0.258000",["A"]="1.000000"},
            {["R"]="0.303000",["G"]="0.324000",["B"]="0.327000",["A"]="1.000000"},
            {["R"]="0.423000",["G"]="0.365000",["B"]="0.322000",["A"]="1.000000"},
            {["R"]="0.347000",["G"]="0.310000",["B"]="0.304000",["A"]="1.000000"},
            {["R"]="0.383000",["G"]="0.288000",["B"]="0.267000",["A"]="1.000000"},
            {["R"]="0.350000",["G"]="0.250000",["B"]="0.149000",["A"]="1.000000"},
            {["R"]="0.325000",["G"]="0.255000",["B"]="0.200000",["A"]="1.000000"},
            {["R"]="0.380000",["G"]="0.315000",["B"]="0.273000",["A"]="1.000000"},
            {["R"]="0.317000",["G"]="0.260000",["B"]="0.258000",["A"]="1.000000"},
            {["R"]="0.303000",["G"]="0.324000",["B"]="0.327000",["A"]="1.000000"},
            {["R"]="0.423000",["G"]="0.365000",["B"]="0.322000",["A"]="1.000000"},
            {["R"]="0.347000",["G"]="0.310000",["B"]="0.304000",["A"]="1.000000"},
            {["R"]="0.383000",["G"]="0.288000",["B"]="0.267000",["A"]="1.000000"},
            {["R"]="0.350000",["G"]="0.250000",["B"]="0.149000",["A"]="1.000000"},
            {["R"]="0.282000",["G"]="0.224000",["B"]="0.224000",["A"]="1.000000"},
            {["R"]="0.231000",["G"]="0.282000",["B"]="0.224000",["A"]="1.000000"},
            {["R"]="0.227000",["G"]="0.224000",["B"]="0.282000",["A"]="1.000000"},
            {["R"]="0.424000",["G"]="0.322000",["B"]="0.353000",["A"]="1.000000"},
            {["R"]="0.267000",["G"]="0.337000",["B"]="0.384000",["A"]="1.000000"},
            {["R"]="0.498000",["G"]="0.357000",["B"]="0.282000",["A"]="1.000000"},
            {["R"]="0.384000",["G"]="0.333000",["B"]="0.267000",["A"]="1.000000"},
            {["R"]="0.451000",["G"]="0.345000",["B"]="0.157000",["A"]="1.000000"},
            {["R"]="0.306000",["G"]="0.224000",["B"]="0.235000",["A"]="1.000000"},
            {["R"]="0.318000",["G"]="0.380000",["B"]="0.361000",["A"]="1.000000"},
            {["R"]="0.310000",["G"]="0.384000",["B"]="0.298000",["A"]="1.000000"},
            {["R"]="0.498000",["G"]="0.369000",["B"]="0.325000",["A"]="1.000000"},
            {["R"]="0.251000",["G"]="0.263000",["B"]="0.278000",["A"]="1.000000"},
            {["R"]="0.498000",["G"]="0.416000",["B"]="0.325000",["A"]="1.000000"},
            {["R"]="0.459000",["G"]="0.420000",["B"]="0.322000",["A"]="1.000000"},
            {["R"]="0.420000",["G"]="0.400000",["B"]="0.384000",["A"]="1.000000"},
        }
    }
}

NMS_MOD_DEFINITION_CONTAINER =
{
["MOD_FILENAME"]  = "MOD_DUD_BarrenColors_v558-A",
["MOD_AUTHOR"]    = "jasondude7116",
["LUA_AUTHOR"]    = "Babscoole",
["NMS_VERSION"]   = "5.58",
["MODIFICATIONS"] =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\SIMULATION\SOLARSYSTEM\BIOMES\BARREN\BARRENCOLOURPALETTES.MBIN",
                    ["MXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Sand", "GcPaletteData"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "Inactive"}
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Wood", "GcPaletteData"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "_16"}
                            }
                        },
                        {
                            ["SPECIAL_KEY_WORDS"] = {"Leaf", "GcPaletteData"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "All"}
                            }
                        },
                    }
                }
            }
        }
    }
}

function GetColours(R,G,B,A)
    return
    [[
        <Property name="Colours">
          <Property name="R" value="]].. R ..[[" />
          <Property name="G" value="]].. G ..[[" />
          <Property name="B" value="]].. B ..[[" />
          <Property name="A" value="]].. A ..[[" />
        </Property>
    ]]
end

function CreateColoursProperty(PaletteColours)
    local PropertiesString = {}

    for j = 1, #PaletteColours do
        local R = PaletteColours[j]["R"]
        local G = PaletteColours[j]["G"]
        local B = PaletteColours[j]["B"]
        local A = PaletteColours[j]["A"]
        table.insert(PropertiesString,GetColours(R, G, B, A))
    end
    local PropertyColoursString =
    [[      <Property name="Colours">
    ]]..table.concat(PropertiesString)..[[
  </Property>]]

    -- print(PropertyColoursString)
    return PropertyColoursString
end

local BaseColourPalettesTable = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][1]["MXML_CHANGE_TABLE"]
for i = 1, #DataTable do
    local Palette = DataTable[i]["PALETTE"]
    local PaletteColours = DataTable[i]["COLOURS"]
    local PaletteNumColours = DataTable[i]["NUMCOLOURS"]

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData", "NumColours", PaletteNumColours},
        ["PRECEDING_KEY_WORDS"] = {"Colours"},
        ["REMOVE"] = "SECTION"
    }

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData", "NumColours", PaletteNumColours},
        ["ADD"] = CreateColoursProperty(PaletteColours)
    }
end
